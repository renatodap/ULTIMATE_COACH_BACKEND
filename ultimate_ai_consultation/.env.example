# ============================================================================
# ULTIMATE AI CONSULTATION - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# ============================================================================

# Anthropic API (for any LLM-based features)
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# Supabase (SHARED with ULTIMATE_COACH_BACKEND)
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_service_role_key
SUPABASE_JWT_SECRET=your_jwt_secret

# Environment
ENVIRONMENT=development  # development | staging | production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# Solver Configuration
SOLVER_TIMEOUT_SECONDS=30          # Max time for constraint solver
SOLVER_MAX_THREADS=4                # Parallel solving threads
MAX_TRADE_OFFS_TO_GENERATE=3       # A/B/C options when infeasible

# Nutrition Calculation
TDEE_CONFIDENCE_INTERVAL=0.15      # ±15% for TDEE estimates
MACRO_FLEXIBILITY_PERCENT=5.0      # ±5% for macro targets
MIN_PROTEIN_G_PER_KG=1.6           # Minimum protein (cutting/maintenance)
MAX_PROTEIN_G_PER_KG=2.4           # Maximum protein (aggressive cutting)
MIN_FAT_G_PER_KG=0.6               # Hormonal floor for fats
MIN_CALORIES_FEMALE=1200           # Safety floor for women
MIN_CALORIES_MALE=1500             # Safety floor for men

# Training Progression
MAX_VOLUME_INCREASE_PERCENT=20.0   # Max weekly volume ramp
DELOAD_FREQUENCY_WEEKS=5           # Force deload every N weeks
MIN_DELOAD_VOLUME_REDUCTION=0.40   # 40% volume reduction in deload
MAX_DELOAD_VOLUME_REDUCTION=0.60   # 60% volume reduction in deload

# Adaptive Control
REASSESSMENT_FREQUENCY_DAYS=14     # Bi-weekly reassessment
PID_PROPORTIONAL_GAIN=200.0        # Calorie adjustment per % error
PID_MAX_ADJUSTMENT_KCAL=200.0      # Cap single adjustment
MIN_ADHERENCE_FOR_PROGRESS=0.70    # 70% adherence to progress
LOW_HRV_THRESHOLD_PERCENT=-10.0    # Trigger deload if HRV drops 10%

# Cost Controls
MAX_COST_PER_GENERATION=0.50       # USD per plan generation
DAILY_COST_LIMIT_PER_USER=0.20     # USD per user per day
ENABLE_VISION_API=false            # Vision API disabled by default (expensive!)
MAX_VISION_CALLS_PER_WEEK=5        # Rate limit if vision enabled

# Feature Flags
ENABLE_BUDGET_OPTIMIZER=true       # Food cost calculations
ENABLE_WEARABLE_SYNC=false         # Garmin/Apple Watch (future)
ENABLE_SENTIMENT_ANALYSIS=true     # Analyze coach chat for mood
ENABLE_CONFIDENCE_TRACKING=true    # Statistical intervals on logs

# Integration with ULTIMATE_COACH_BACKEND
BACKEND_BASE_URL=http://localhost:8000
BACKEND_API_PREFIX=/api/v1
FRONTEND_BASE_URL=http://localhost:3000

# Redis (for caching - optional, can use in-memory for dev)
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=false

# Monitoring (Optional, for production)
SENTRY_DSN=
ENABLE_METRICS=true

# Safety & Validation
ENABLE_SAFETY_GATE=true            # NEVER disable in production!
ENABLE_DOMAIN_RULES=true           # Progression, volume, deload rules
ENABLE_ADHERENCE_RISK_SCORING=true # Complexity vs experience matching

# Database Pool (if connecting directly, usually not needed)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Logging
LOG_FORMAT=json  # json | console
LOG_FILE=adaptive_system.log
ENABLE_SQL_LOGGING=false  # Set true to see all SQL queries (debug only)
